> è‡ªå·±æ–‡ç« ä¸­è™½ç„¶æœ‰å‡ ç¯‡æ¶‰åŠåˆ° vue ç›¸å…³çš„çŸ¥è¯†ï¼Œä¸è¿‡é‚£éƒ½æ˜¯å­¦ç”Ÿæ—¶ä»£æ€»ç»“çš„ã€‚å¯ç¬‘çš„æ˜¯å·¥ä½œä»¥æ¥ï¼Œè‡ªå·±ä¸€ç›´æ˜¯å¤„åœ¨ react æŠ€æœ¯æ ˆã€‚ä½†æ˜¯è¿‘æ¥ç”±äºå·¥ä½œéœ€è¦ï¼Œä¸å¾—ä¸å¤ä¹ ä¸€ä¸‹ vue äº†ã€‚è™½ç„¶è¯´éƒ½æ˜¯å·¥å…·è€Œå·²ï¼Œä½†æ˜¯æ¯•ç«Ÿä¸€ç›´åœ¨å†™ reactï¼Œèµ°å‡ºèˆ’é€‚åŒºå»æ¥å—ä¸€ä¸ªä¸å¤ªç†Ÿæ‚‰çš„äº‹ç‰©æ€»çš„æ¥è¯´è¿˜æ˜¯ä¸å¤ªå¥½å—çš„ã€‚ç»“ä¸‹æ¥æˆ‘å°±ç»“åˆ vue ä¸ react çš„ diffï¼Œå¤ä¹ ä¸€ä¸‹ vue çš„é‡ç‚¹çŸ¥è¯†ã€‚

## ä»ä¸¤è€…çš„å…¥å£å‡½æ•°å’Œ app ç»„ä»¶å¼€å§‹

**react**

```
import React from "react";
import ReactDOM from "react-dom";

const App = () => {
  return <div>appç»„ä»¶</div>;
};

ReactDOM.render(<App />, document.getElementById("root"));
```

**vue**

```
import Vue from "vue";
import App from "./App.vue";


new Vue({
  render: (h) => h(App),
}).$mount("#app");
```

app ç»„ä»¶ï¼ˆ.vue æ–‡ä»¶ç±»å‹ï¼‰

```
<template>
  <div id="app">appç»„ä»¶</div>
</template>

<script>
export default {
  name: "App",
};
</script>
```

ç†Ÿæ‚‰å¯¹æ¯”ä¸€ä¸‹ï¼Œå¤§å®¶å¯ä»¥çœ‹å‡ºå¤šå°‘åŒºåˆ«å‘¢ï¼Ÿ

* ã€åŒºåˆ« 1ã€‘react ç»„ä»¶å…¨éƒ¨é‡‡ç”¨ jsx æ¨¡å¼è¿›è¡Œç¼–å†™ï¼Œvue ç»„ä»¶å¤§éƒ¨åˆ†é‡‡ç”¨æ¨¡ç‰ˆæ–¹å¼è¿›è¡Œç¼–å†™

  è¯´çš„å†ç»†ä¸€ç‚¹å°±æ˜¯

  * react ç»„ä»¶ä¸­ï¼Œ`<app/>`è¿™ä¸ªå°–è§’å·é‡Œé¢ä¸æ˜¯ä¸€ä¸ªå‡½æ•°å°±æ˜¯ä¸€ä¸ªç±»ï¼ˆæŠŠ app çœ‹æˆä¸€ä¸ªå˜é‡ï¼‰ã€‚å› ä¸ºåœ¨ react çš„ç»„ä»¶ä¸­æœ‰ä¸¤ç§ç±»å‹ï¼Œæˆ– class æˆ– function ã€‚æ•…è¿™é‡Œé€šè¿‡ import å¯¼å…¥çš„ä¹Ÿå°±æ˜¯è¿™ä¸¤ç§æ•°æ®ç»“æ„
  * vue ç»„ä»¶ï¼Œ`<app/>`è¿™ä¸ªå°–è§’å·é‡Œé¢æ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚å› ä¸ºç»„ä»¶ä¸­æˆ‘ä»¬é€šå¸¸å¯¼å‡ºçš„å°±æ˜¯ä¸€ä¸ªé€‰é¡¹å¯¹è±¡ï¼Œä¸è¿‡å‘¢ã€‚ä¼ åˆ°å¤–é¢çš„é€‰é¡¹å¯¹è±¡æ˜¯ä¼šæ¯”èµ·æˆ‘ä»¬è‡ªå·±å¯¼å‡ºçš„å¤šä¸€äº›ä¸œè¥¿ã€‚æ‰“å°ä¸€ä¸‹çœ‹çœ‹ã€å¤šäº†ä¸€äº›é’©å­ã€æ¸²æŸ“å‡½æ•°å’Œå…¶ä»–çš„å±æ€§ä»¬ã€‘![æˆªå± 2021-11-13 ä¸Šåˆ 9.32.04.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8ddd466c01c94031b55350ba0c81cbc2~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?)

* ã€åŒºåˆ« 2ã€‘react ç»„ä»¶æœ¬è´¨å°±æ˜¯ function ï¼ˆclass ç±»å‹çš„å°±æ˜¯è¯¥ class çš„å®ä¾‹ï¼‰ï¼Œè€Œ vue ç»„ä»¶çš„æœ¬è´¨æ˜¯ä¸€ä¸ª vue å®ä¾‹

  è¯´çš„å†ç»†ä¸€ç‚¹ï¼Œè¯´ç™½äº†å…¶å®ä¸€ä¸ªç»„ä»¶çš„é¢„æœŸäº§ç‰©å°±æ˜¯ vnodeã€‚

  **å¯¹äº react è€Œè¨€ï¼š**

  é¦–å…ˆè¦çŸ¥é“ jsx åœ¨æ‰“åŒ…è¿‡ç¨‹ä¸­å°±ä¼šè¢« babel å¤„ç†ä¸º`createElement`å‡½æ•°çš„è°ƒç”¨ï¼ˆreact v17 ä¹‹å‰ï¼‰ï¼Œè€Œ`createElement`å‡½æ•°çš„äº§ç‰©å°±æ˜¯ react element ä¹Ÿå°±æ˜¯ vnodeï¼Œæ‰€ä»¥å¯ä»¥è¿™æ ·ç†è§£ react ä¸­ jsx å°±ç­‰åŒäº vnodeã€‚

  åŒæ—¶ react ä¸­çš„ä¸¤å¤§ç»„ä»¶ç±»å‹éƒ½æ˜¯å¾ˆæ–¹ä¾¿è·å–åˆ° jsx çš„ã€‚

  1. function ç±»å‹ï¼Œè¿™ä¸ª function å…¶æœ¬èº«è¿”å›å€¼çš„å°±æ˜¯ä¸€ä¸ª jsx
  2. class ç±»å‹ï¼Œé€šè¿‡è¯¥ class è¿›è¡Œå®ä¾‹åŒ–çš„å®ä¾‹å¯¹è±¡å…¶ render æ–¹æ³•çš„è¿”å›å€¼ä¹ŸåŒæ ·æ˜¯ä¸€ä¸ª jsx

  **function ç±»å‹**

  ```
  const App = () => {
    return <div>appç»„ä»¶</div>;
  };
  ```

  **class ç±»å‹**

  ```
  class App extends React.Component {
    render() {
      return <div>app</div>;
    }
  }
  ```

  çœ‹ä¸€ä¸‹ react çš„ vnode

  ```
  import React from "react";
  import ReactDOM from "react-dom";

  const Test01 = () => {
    return <div>test01</div>;
  };

  const Test02 = () => {
    return <div>test02</div>;
  };

  const App = () => {
    return (
      <>
        <Test01 />
        <Test02 />
      </>
    );
  };

  console.log(App());
  ReactDOM.render(<App />, document.getElementById("root"));
  ```

![æˆªå± 2021-11-13 ä¸Šåˆ 10.39.53.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7740ddd49a004af78c5d25f1e1ffbf7b~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?)

**ä½†æ˜¯å¯¹äº vue ä¸­æ˜¯æ€ä¹ˆä¸ªæ ·å­å‘¢ï¼Ÿ**

é¦–å…ˆé€šè¿‡é˜…è¯»æ–‡æ¡£ï¼Œå…¶è§£é‡Šè¯´ï¼šæ¯ä¸ª vue ç»„ä»¶æœ¬è´¨æ˜¯éƒ½æ˜¯ vue å®ä¾‹ã€‚æˆ‘ä»¬å…ˆå»éªŒè¯ä¸€ä¸‹ï¼Œæ‰“å°ä¸€ä¸‹æ ¹å®ä¾‹ï¼Œçœ‹çœ‹å…¶æ•°æ®ç»“æ„æ˜¯æ€æ ·çš„ã€‚

```
import Vue from "vue";
import App from "./App.vue";

console.log(
  new Vue({
    render: (h) => h(App),
  }).$mount("#app")
);
```

**è¾“å‡º**

![æˆªå± 2021-11-13 ä¸Šåˆ 11.00.05.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/046fa606c8a14ddfb14d922c0ab33384~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?)

å¯è§å…¶å­ç»„ä»¶ç¡®å®æ˜¯ vue å®ä¾‹ï¼ˆå‡†ç¡®æ¥è¯´æ˜¯`VueComponent`å®ä¾‹ï¼‰

é‚£æˆ‘å°±æœ‰ä¸€äº›ç–‘é—®äº†ï¼Ÿ

1. vue ä¸­çš„å­ç»„ä»¶æ˜¯æ€ä¹ˆå˜æˆçš„ vue å®ä¾‹ï¼Ÿ
2. vue å®ä¾‹æ˜¯æ€ä¹ˆäº§å‡º vnode çš„ï¼Ÿ

æ€ä¹ˆå˜æˆçš„ vue å®ä¾‹ï¼Œæˆ‘æƒ³åº”è¯¥å’Œ react çš„æ€æƒ³æœ‰äº›ç±»ä¼¼ã€‚react æƒ³è¦æ‹¿åˆ° vnodeï¼Œå¦‚æœæ˜¯å‡½æ•°å¼ç»„ä»¶ï¼Œå®ƒä¼šå»æ‰§è¡Œ functionï¼ˆclass ç»„ä»¶åˆ™ä¼šå…ˆè¿›è¡Œå®ä¾‹åŒ–å†è°ƒç”¨å®ä¾‹çš„ render æ–¹æ³•ï¼‰vue åº”è¯¥ä¹Ÿæ˜¯åœ¨æŸä¸€ä¸ªæ—¶é—´èŠ‚ç‚¹å†…ï¼Œé€šè¿‡ä¼ è¿›å»çš„å­ç»„ä»¶é€‰é¡¹å¯¹è±¡è¿›è¡Œäº†ç»„ä»¶çš„ vue å®ä¾‹åŒ–ã€‚

è‡³äºå®ƒæ€ä¹ˆäº§ç”Ÿçš„ vnode å‘¢ï¼Œé¦–å…ˆå†çœ‹ä¸€ä¸‹ä¸Šé¢è¾“å‡ºçš„å­ç»„ä»¶å®ä¾‹ã€‚å®ƒæ˜¯æœ‰ä¸€ä¸ª vnode å±æ€§ã€‚æ€ä¹ˆæ•´å‡ºæ¥çš„å‘¢ï¼Ÿ

é¦–å…ˆè¦æ¸…æ¥šä¸€ä»¶äº‹æƒ…ï¼Œåœ¨`.vue`ç»„ä»¶ä¸­æ¨¡ç‰ˆæœ€ç»ˆæ˜¯ä¼šç¼–è¯‘æˆä¸€ä¸ªæ¸²æŸ“å‡½æ•°çš„ã€‚è¿™ä¸ªæ¸²æŸ“å‡½æ•°ä¼šè¢«æ³¨å…¥åˆ°`script`å¯¼å‡ºçš„é€‰é¡¹å¯¹è±¡ä¸­ï¼ˆå¯ä»¥çœ‹ä¸‹ä¸Šé¢æˆ‘æ‰“å°çš„ vue å¯¼å‡ºçš„ç»„ä»¶é€‰é¡¹å¯¹è±¡ï¼‰

**æ¥çœ‹ä¸€ä¸‹å®˜æ–¹æ–‡æ¡£æä¾›çš„ä¸€ä¸ªç®€å•çš„æ¸²æŸ“å‡½æ•°:**

```
render: function (createElement) {
  return createElement('h1', this.blogTitle)
}
```

çœ‹åˆ°è¿™ä¸ª`createElement`æƒ³å¿…å°±æœ‰äº›ç†Ÿæ‚‰äº†ï¼Œè¿™ä¸å’Œ jsx æœ‰äº›ç›¸ä¼¼å—ã€‚ä¹Ÿå°±æ˜¯è¯´ vue ä¸­ä¹Ÿæ˜¯æœ‰ä¸€ä¸ª`createElement`å‡½æ•°ï¼Œreact æä¾›çš„`createElement`å®ƒçš„äº§ç‰©æ˜¯ä¸€ä¸ª vnodeï¼Œæ¥çœ‹ä¸€ä¸‹ vue ä¸­å‘¢ï¼Ÿ

**æ–‡æ¡£ä»‹ç»ï¼š**

![æˆªå± 2021-11-13 ä¸‹åˆ 3.54.27.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3bd495c4a8d94b05972a1d77612a427f~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?)

ç­”æ¡ˆæ¥äº†ï¼švue ä¸­çš„`createElement`å‡½æ•°çš„äº§ç‰©ä¹Ÿæ˜¯ vnodeï¼Œé‚£ä¹ˆåˆ°è¿™é‡Œå°±æ²¡æœ‰ä»€ä¹ˆç–‘é—®äº†ã€‚å¤§è‡´çš„æµç¨‹å’Œ react è¿˜æ˜¯æ¯”è¾ƒç›¸ä¼¼çš„

ä¸‹é¢å†æ¥çœ‹ä¸€ä¸‹æ—¥å¸¸å¼€å‘ä¸­çš„ä¸åŒç‚¹å§

## å¼€å‘æ ¸å¿ƒ â€” ç»„ä»¶é€šä¿¡

ç»„ä»¶é€šä¿¡å…¶å®æ˜¯æ—¥å¸¸å¼€å‘ä¸­æœ€åŸºç¡€æœ€é‡è¦çš„çš„éƒ¨åˆ†ï¼Œvue ä¸­ç›¸æ¯”è¾ƒäº react çš„é€šä¿¡æ–¹å¼åˆå­˜åœ¨å“ªäº›ä¸åŒå‘¢ã€‚

### é¦–å…ˆæ˜¯çˆ¶å­é€šä¿¡

å¯¹äºçˆ¶å­ä¹‹é—´çš„é€šä¿¡ï¼Œä¸¤è€…æ˜¯æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«çš„ã€‚éƒ½æ˜¯ props çš„å½¢å¼å‘ä¸‹å±‚ç»„ä»¶ä¼ é€’æ•°æ®

**react**

1. å¦‚æœæ˜¯å‡½æ•°å¼ç»„ä»¶ï¼Œåˆ™ä¼šåœ¨è·å–å­ç»„ä»¶ vnode æ—¶æŠŠçˆ¶ç»„ä»¶å±æ€§ä»¥å‡½æ•°å‚æ•°å½¢å¼ä¼ é€’ç»™å­ç»„ä»¶ã€‚æ•…å¯ä»¥ç›´æ¥åœ¨å­ç»„ä»¶çš„ props ä¸­è·å–
2. å¦‚æœæ˜¯ç±»ç»„ä»¶ï¼Œåˆ™ä¼šåœ¨è·å–å­ç»„ä»¶ vnode æ—¶ï¼ŒæŠŠçˆ¶ç»„ä»¶å±æ€§ä»¥æ„é€ å‡½æ•°å‚æ•°ç±»å‹ä¼ é€’ç»™å­ç»„ä»¶ï¼Œè¿™æ ·æ•°æ®å°±è¢«æ”¾å…¥äº†å­ç»„ä»¶å®ä¾‹çš„ props å±æ€§ä¸­ï¼Œæ•…å¯ç›´æ¥é€šè¿‡`è¯¥ç»„ä»¶å®ä¾‹.props`è·å–

```
const Test01 = (props) => {
  return <div>{props.name}</div>;
};

const App = () => {
  return (
    <>
      <Test01 name="zs" />
    </>
  );
};
```

**vue**ï¼ˆè¿™é‡Œæˆ‘å°± jsx å’Œæ¨¡ç‰ˆè¯­æ³•æ··ç”¨ä¸€ä¸‹äº†ï¼Œæš‚æ—¶ä»…å†™ä½¿ç”¨å±‚é¢ã€æ±—é¢œğŸ’§ã€‘ï¼‰

```
// çˆ¶ç»„ä»¶
<template>
  <div id="app">
    appç»„ä»¶
    <Test01 :name="name" />
  </div>
</template>

<script>
import Test01 from "./components/Test01";
export default {
  name: "App",
  data: function () {
    return {
      name: "zs",
    };
  },
  components: {
    Test01,
  },
};
</script>
```

å­ç»„ä»¶

```
/* eslint-disable no-unused-vars */
export default {
  name: "test01",
  props: {
    name: {
      type: String,
    },
  },
  render: function (h) {
    return <div>test01 ç»„ä»¶{this.name}</div>;
  },
};
```

### å…¶æ¬¡æ˜¯å­çˆ¶é€šä¿¡

`å­çˆ¶é€šä¿¡è¿™é‡Œreactå’Œvueçš„æ–¹å¼æ˜¯ä¸åŒçš„`

å­çˆ¶é€šä¿¡çš„ä¸€èˆ¬åœºæ™¯æ˜¯ï¼šå­ç»„ä»¶æƒ³è¦ä¿®æ”¹çˆ¶ç»„ä»¶ä¼ ç»™ä»–çš„çŠ¶æ€ï¼Œä½†æ˜¯å‘¢å› ä¸ºè¦ä¿è¯æ•°æ®æµçš„æ¸…æ™°ï¼Œreact å’Œ vue çš„æ•°æ®æµæ€æƒ³éƒ½æ˜¯å•å‘çš„ã€‚ä¹Ÿå°±æ˜¯è¯´å­ç»„ä»¶æ˜¯ä¸èƒ½åœ¨å®ƒå†…éƒ¨è¿›è¡Œ props æ•°æ®ä¿®æ”¹çš„

é‚£ä¹ˆæ€ä¹ˆåŠå‘¢ï¼Ÿ

å…¶å®ä¹Ÿå¾ˆç®€å•ä¸»è¦å°±æ˜¯`è°çš„çŠ¶æ€è°å°±è¦æƒé™å»ç®¡ç†`

* å¯¹äº reactï¼šå°±æ˜¯åœ¨å°†ä¸€ä¸ªçŠ¶æ€ä¼ é€’ç»™å­ç»„ä»¶çš„åŒæ—¶è¿˜éœ€è¦å°†æ”¹å˜è¿™ä¸ªçŠ¶æ€çš„æ–¹æ³•ä¹Ÿä¼ é€’ä¸‹å»ï¼Œä¹Ÿå°±æ˜¯è¯´å°†è¿™ä¸ªçŠ¶æ€çš„å®é™…æ§åˆ¶æƒäº¤ç»™å­ç»„ä»¶

* å¯¹äº vueï¼šå‘å¸ƒè®¢é˜…ï¼Œé‡‡ç”¨ä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶çš„æ€è·¯ã€‚å­ç»„ä»¶è§¦å‘ä¸€ä¸ªè‡ªå®šä¹‰äº‹ä»¶ï¼Œçˆ¶ç»„ä»¶è¿›è¡Œç›‘å¬å¹¶ä¸”æ‰§è¡ŒçŠ¶æ€ä¿®æ”¹é€»è¾‘

#### **code demo**

**react**

```
// å­ç»„ä»¶
const Test01 = ({ name, updataName }) => {
  return (
    <>
      <div>
        {name}
        <button
          onClick={() => {
            updataName("å­ç»„ä»¶");
          }}
        >
          ä¿®æ”¹name
        </button>
      </div>
    </>
  );
};

// çˆ¶ç»„ä»¶
const App = () => {
  const [name, updataName] = useState("çˆ¶ç»„ä»¶åˆå§‹çŠ¶æ€");
  return (
    <>
      <Test01 name={name} updataName={updataName} />
    </>
  );
};
```

**vue**

å­ç»„ä»¶

```
/* eslint-disable no-unused-vars */
export default {
  name: "test01",
  props: {
    name: {
      type: String,
    },
  },
  render: function (h) {
    return (
      <div>
        test01 ç»„ä»¶{this.name}
        <button onClick={() => this.$emit("updataData", "å­ç»„ä»¶æ§åˆ¶çš„")}>
          ä¿®æ”¹çˆ¶ç»„ä»¶çŠ¶æ€
        </button>
      </div>
    );
  },
};
```

çˆ¶ç»„ä»¶

```
<template>
  <div id="app">
    appç»„ä»¶
    <Test01 :name="name" @updataData="updataName" />
  </div>
</template>

<script>
import Test01 from "./components/Test01";
export default {
  name: "App",
  data: function () {
    return {
      name: "zs",
    };
  },
  methods: {
    updataName: function (value) {
      this.name = value;
    },
  },
  components: {
    Test01,
  },
};
</script>
```

### è·¨å±‚çº§é€šä¿¡

é’ˆå¯¹äºè·¨å±‚çº§é€šä¿¡

react ç»™å‡ºçš„æ–¹æ¡ˆæ˜¯ä½¿ç”¨ä¸Šä¸‹æ–‡`Context`ã€‚é‚£ä¹ˆå‘¢ï¼Œæ€æƒ³å°±æ˜¯åˆ›å»ºå¹¶ç»´æŠ¤ä¸€ä¸ªä¸Šä¸‹æ–‡ï¼Œè¯¥ä¸Šä¸‹æ–‡ä¸­çš„æ‰€æœ‰ç»„ä»¶éƒ½å¯ä»¥è®¿é—®åˆ°å½“å‰ä¸Šä¸‹æ–‡çš„æ•°æ®ã€‚å¯å€Ÿä½œç”¨åŸŸè¿›è¡Œç†è§£ï¼Œå­ä½œç”¨åŸŸæ— è®ºåµŒå¥—å¤šæ·±éƒ½æ˜¯å¯ä»¥å‡­å€Ÿç€ä½œç”¨åŸŸé“¾æ‰¾åˆ°å…¶æœ€é¡¶å±‚å£°æ˜çš„å˜é‡

![æˆªå± 2021-11-14 ä¸‹åˆ 5.29.11.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/acdc93a6c639417b935dcaee8227f2fc~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?)

vue çš„é€‰é¡¹å¯¹è±¡ä¸­ä¹Ÿæä¾›äº†å…·æœ‰ç±»ä¼¼åŠŸèƒ½çš„é€‰é¡¹å±æ€§`provide and inject`

#### vuex vs redux

è¿™ä¸¤ä¸ªä¸œè¥¿çš„æ€æƒ³ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œéƒ½æ˜¯åŸºäºå‘å¸ƒè®¢é˜…

##### redux

redux å…¶æœ¬èº«æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯åœ¨å®é™…é¡¹ç›®ä¸­è¿˜æ˜¯éœ€è¦å€ŸåŠ©ä¸€ä¸‹å®ƒçš„å‘¨è¾¹çš„ã€‚æ¯”å¦‚`react-redux,redux-saga`ç­‰

çœ‹ä¸€ä¸‹ redux çš„åŸºæœ¬åŸç†ï¼Œå›¾è§£

![æˆªå± 2021-11-14 ä¸‹åˆ 9.27.30.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7c9a284d6a2746e696bd32ea710daef1~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?)

```
function createStore(reducer,preloadedState){
    let state=preloadedState;
    let listeners = [];

  
    function getState(){
        return state;
    }

    function subscribe(listener){
        listeners.push(listener);
        return ()=>{
            let index = listeners.indexOf(listener);
            listeners.splice(index,1);
        }
    }
   
    function dispatch(action){
        state=reducer(state,action);
        listeners.forEach(l=>l());
        return action;
    }
    dispatch({type:'@@REDUX/INIT'});
    const store = {
        getState,
        subscribe,
        dispatch
    }
    return store;
}
export default createStore;
```

react æŠ€æœ¯æ ˆçš„ä¸šåŠ¡ä»…ä»…é ä¸€ä¸ª redux æ˜¯è¡Œä¸é€šçš„ï¼Œéœ€è¦é…åˆä½¿ç”¨å‘¨è¾¹æ’ä»¶ & redux çš„ä¸€äº›ä¸­é—´ä»¶

###### redux ä¸­é—´ä»¶çš„åŸºæœ¬æ€æƒ³

é¦–å…ˆï¼Œæ¯ä¸€ä¸ªä¸­é—´ä»¶éƒ½æ˜¯ä¸€ä¸ªå‡½æ•°ã€‚ä»–ä»¬æ€»æ˜¯å›´ç»•ç€ dispatch åšæ–‡ç« 

ä¸€ä¸ªç®€å•ä¸­é—´ä»¶çš„å†™æ³•ï¼šåŒæ ·ä¹Ÿæ˜¯åŸºäºæ´‹è‘±æ¨¡å‹ï¼Œæ¥å—ä¸Šä¸€ä¸ª dispatch è¿”å›ä¸€ä¸ªæ–°æ”¹é€ çš„ dispatch

```
const middlewareDemo=next=>action=>{
  // é€»è¾‘å¤„ç†
}
```

![lALPDhJzyNqX4WHNA1DNBP8\_1279\_848.png\_720x720g.jpg](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b0ed6fc8fac84bb281886c5ffc65db4c~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?)

###### react-redux ä¸»è¦å®ç°æ€æƒ³

ä¸€èˆ¬æƒ³è¦åœ¨ react é¡¹ç›®ä¸­æ›´å¥½çš„åº”ç”¨`redux`ï¼Œé‚£ä¹ˆ`react-reduxè¿™ä¸ªä¸œè¥¿æ˜¯å¿…ä¸å¯å°‘çš„`

æ ¸å¿ƒæ€æƒ³ï¼šå€ŸåŠ© contextã€‚å°†ä»“åº“ä½œä¸º react æ•´ä¸ªåº”ç”¨ä¸Šä¸‹æ–‡çš„ä¸€ä¸ªæ•°æ®æºï¼Œé‚£ä¹ˆå…¶å­ç»„ä»¶å°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„è¿›è¡Œæ¶ˆè´¹ï¼ˆä¸»è¦è·å–ä»“åº“æä¾›çš„ dispatch æˆ–è€… getStateï¼‰

###### redux-saga åŸºæœ¬æ€æƒ³

å¦‚æœæƒ³ä½¿ç”¨ redux è¿›è¡Œå¼‚æ­¥æ“ä½œï¼Œé‚£ä¹ˆå°±å¯èƒ½ä¼šä½¿ç”¨`redux-saga`è¿™ä¸ªä¸­é—´ä»¶ã€‚å…³äºå®ƒçš„åŸºæœ¬å®ç°æ€è·¯æˆ‘åŸæ¥æœ‰è¿‡æ•´ç†ã€å¯ä¸»é¡µç¿»ä¸€ä¸‹ã€‘

![æˆªå± 2021-11-14 ä¸‹åˆ 9.27.56.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2a6581adeea7451fa3dcc4846eab7d65~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?)

#### vuex

vuex æ„Ÿè§‰ä¸Šç›¸æ¯”è¾ƒè€Œè¨€ç®€å•ä¸€äº›äº†

![æˆªå± 2021-10-15 ä¸‹åˆ 7.52.46.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2187d240a15c4dfe9cb2feafc0992f8d~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?)

#### å…¶ä»–

å…¶ä»–çš„é€šä¿¡æ–¹å¼ï¼Œreact å’Œ vue å°±åŸºæœ¬æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ã€‚å°±ä¸åš code å±•ç¤ºäº†

1. æ¯”å¦‚è¯´ä½¿ç”¨äº‹ä»¶æ€»çº¿ï¼Œç®€å•çš„ä¸€ä¸ªå‘å¸ƒè®¢é˜…

2. å†æ¯”å¦‚è¯´é€šè¿‡è·å–é€šä¿¡ç›®æ ‡çš„å®ä¾‹å¯¹è±¡ï¼Œç„¶åå€ŸåŠ©å®ƒæ¥ä¿®æ”¹å…¶çŠ¶æ€

## æ ¸å¿ƒæ¨¡å— â€” ç»„ä»¶åŠå…¶ä»£ç å¤ç”¨æ–¹æ³•

å…³äºæ¡†æ¶å†…æä¾›çš„æœ‰å…³äºä»£ç å¤ç”¨çš„æ–¹æ³•æˆ–è€…æ€æƒ³ä¸¤è€…åˆå­˜åœ¨å“ªäº›ä¸ä¸€æ ·å‘¢

### react

ä» mixins åˆ°é«˜é˜¶ç»„ä»¶ï¼Œå†åˆ°ç°åœ¨çš„å‡½æ•°å¼ç»„ä»¶

å¯¹äºç°åœ¨è€Œè¨€ï¼Œè²Œä¼¼å¤§éƒ¨åˆ†çš„ä¸šåŠ¡ä»ç„¶æ˜¯ class ç»„ä»¶ã€‚é‚£ä¹ˆç°é˜¶æ®µå¯¹äº class ç»„ä»¶è€Œè¨€å…¶ä¸»è¦ä½¿ç”¨çš„ä»£ç å¤ç”¨çš„æ–¹å¼å°±æ˜¯é‡‡ç”¨é«˜é˜¶ç»„ä»¶ã€‚

æ‰€è°“é«˜é˜¶ç»„ä»¶æœ¬è´¨å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä»¥æ—§ç»„ä»¶ä¸ºå¦‚å‚æ–°ç»„ä»¶ä¸ºè¿”å›å€¼ã€‚ä¸»è¦æˆ‘æ„Ÿè§‰å…¶å®ç±»ä¼¼äºä¸­é—´ä»¶çš„æ€æƒ³

### vue

vue ä¸­å¤ç”¨ä»£ç çš„æ–¹å¼æ˜¯ä½¿ç”¨ mixinsï¼Œå°±æ˜¯`æŠŠä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šç»„ä»¶ä¸­çš„å…¬å…±é€»è¾‘æŠ½å–å‡ºæ¥ã€‚ç„¶ååœ¨æ··å…¥åˆ°ç›¸å…³ç»„ä»¶ä¸­`ã€‚ç±»ä¼¼äº util æ–¹æ³•çš„æŠ½ç¦»ä½†åˆå­˜åœ¨å¾ˆå¤šä¸åŒã€‚

ä¸¾ä¸ªåœºæ™¯ï¼šæ¯”å¦‚è¯´å¤šä¸ªç»„ä»¶ä¸­éƒ½éœ€è¦æœ‰ä¸€ä¸ªå€’è®¡æ—¶çš„é€»è¾‘

ç®€å•å®ç°çš„å…·ä½“æ“ä½œä¸ºï¼šå…ˆå®šä¹‰ä¸€ä¸ª number çŠ¶æ€ã€‚ç„¶ååœ¨ç»„ä»¶æŒ‚è½½é’©å­ä¸­è¿›è¡Œ`number--`çš„æ“ä½œ

å¦‚æœä¸è€ƒè™‘å¤ç”¨çš„åŒ–ï¼Œå¤šä¸ªç»„ä»¶éƒ½éœ€è¦å†™ä¸€å¥—è¿™æ ·çš„é€»è¾‘ä»£ç ä¸ä½†è‡ƒè‚¿æ‰‹å†™çš„æ—¶å€™ä¹Ÿååˆ†æ¶å¿ƒã€‚

#### code demo

##### æœªä½¿ç”¨ mixins ä¹‹å‰ï¼š

```
// ç»„ä»¶test02
export default {
  data: () => {
    return {
      count: 10,
    };
  },
  mounted: function () {
    setInterval(() => {
      if (this.count > 0) {
        this.count--;
      }
    }, 1000);
  },
  render: function (h) {
    return <div>{this.count}</div>;
  },
};
```

æ­¤æ—¶å¦‚æœè¿˜æœ‰ä¸€ä¸ªç»„ä»¶ä¹Ÿæ˜¯éœ€è¦ä¸€ä¸ªç›¸åŒçš„å€’è®¡æ—¶åŠŸèƒ½ï¼Œé‚£ä¹ˆæ¯«æ— ç–‘é—®ã€‚å¾—å†æ¥ä¸€é copy å§

##### ä½¿ç”¨ mixins æŠ½ç¦»ä¹‹å

**å€’è®¡æ—¶åŠŸèƒ½æŠ½ç¦»**

```
// å€’è®¡æ—¶
/* eslint-disable no-unused-vars */
export default {
  data: () => {
    return {
      count: 10,
    };
  },
  mounted: function () {
    setInterval(() => {
      if (this.count > 0) {
        this.count--;
      }
    }, 1000);
  },
};
```

**åŸæ¥ç»„ä»¶**

```
// ç»„ä»¶ï¼štest02
/* eslint-disable no-unused-vars */
import timer from "../common/timer";
export default {
  mixins: [timer],
  data: function () {
    return {
      count: 10,
    };
  },
  render: function (h) {
    return <div>test02:---{this.count}</div>;
  },
};
```

**è‹¥æ­¤æ—¶ç»„ä»¶ test03 ä¹Ÿéœ€è¦æ­¤åŠŸèƒ½**

```
/* eslint-disable no-unused-vars */
import timer from "../common/timer";
export default {
  mixins: [timer],
  data: function () {
    return {
      count: 20,
    };
  },
  render: function (h) {
    return <div>test03:---{this.count}</div>;
  },
};
```

ä¸”å› åˆå¹¶è§„åˆ™çš„å­˜åœ¨ï¼Œå€’è®¡æ—¶çš„åˆå§‹å€¼æˆ‘ä»¬æ˜¯è¿˜å¯ä»¥åœ¨ç»„ä»¶å†…éƒ¨è‡ªå®šä¹‰çš„

![æˆªå± 2021-11-16 ä¸‹åˆ 2.11.11.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a214cc0adf884b598ee765ff43176704~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?)

è¿™æ ·æ˜æ˜¾èˆ’æœå¤šäº†

#### mixins çš„åˆå¹¶è§„åˆ™

**data ä¸­ï¼š** æœ‰åŒåæ•°æ®ï¼Œä»¥ç»„ä»¶æ•°æ®ä¸ºä¸»

**é’©å­ä¸­ï¼š** æœ‰åŒåé’©å­å‡½æ•°ï¼Œä¸¤è€…éƒ½ä¼šè¿›è¡Œè°ƒç”¨ï¼Œæ‰§è¡Œé¡ºåºæœ‰äº›ä¸åŒï¼Œæ··å…¥ > ç»„ä»¶

**å€¼æ˜¯å¼•ç”¨ç±»å‹çš„é€‰å‹**ï¼ˆegï¼šmethodï¼‰ï¼šå±æ€§ key ç›¸åŒï¼Œä»¥ç»„ä»¶æ•°æ®ä¸ºä¸»

## å†ç®€å•è°ˆä¸€ä¸‹è®¾è®¡å±‚é¢ä¸Šï¼Œvue ç›¸è¾ƒäº react çš„åšå‡ºçš„ä¼˜ç‚¹

é¦–å…ˆä» react è®¾è®¡ä¸Šçš„ç¼ºç‚¹è¯´èµ·

react ä¸­ç»„ä»¶æ›´æ–°æ—¶ï¼Œåº”ç”¨æ˜¯æ— æ³•è·å–å…·ä½“æ˜¯å“ªå—ç»„ä»¶éœ€è¦é‡æ–° diff è·å–æœ€æ–°çš„ vnode çš„ã€‚æ•…åªèƒ½æ˜¯ä»æ•´é¢—åº”ç”¨ä¸Šä¸‹æ‰‹ï¼Œä»å¤´ diffã€‚è¿™å°±å¯¼è‡´äº† diff è®¡ç®—é‡çš„å¢å¤§ï¼Œéšç€é¡¹ç›®å¤æ‚åº¦çš„ä¸Šå‡ï¼Œå°±å…¶è®¡ç®—æ‰€æ¶ˆè€—çš„æ—¶é—´å¯èƒ½æ— æ³•åœ¨æµè§ˆå™¨çš„ä¸€å¸§æ—¶é—´å†…æ‰§è¡Œå®Œæ¯•ã€‚å¯¼è‡´é¡µé¢å‡ºç°å¡é¡¿

è™½ç„¶åé¢ react åé¢å‡çº§äº†æ¶æ„ï¼Œæ•´å‡ºäº† fiberã€‚å°† diff è¿™ä¸ªå¤§ä»»åŠ¡è¿›è¡Œæ‹†åˆ†å¹¶è®¾ç½®äº†ä»»åŠ¡ä¼˜å…ˆçº§ã€‚è™½ç„¶è¯´æ•ˆæœä¸Šçœ‹æ˜¯å¯ä»¥è§£å†³é—®é¢˜

ä½†æ˜¯ç»†ç©¶ï¼Œå…¶æ ¹æœ¬é—®é¢˜è¿˜æ˜¯å­˜åœ¨ï¼ˆå¤šå‡ºçš„ä¸å¿…è¦çš„ diff è®¡ç®—é‡ï¼‰ï¼Œåªæ˜¯ä¸å†å®¹æ˜“äº§ç”Ÿé¡µé¢å¡é¡¿çš„æ•ˆæœäº†ã€‚

vue ä¹‹æ‰€ä»¥ä¸ä¼šå‡ºç° react çš„è¿™ç§æƒ…å†µï¼Œæ˜¯å› ä¸º vue åœ¨ç¼–è¯‘æ—¶åšäº†ä¸€äº›ä¼˜åŒ–ã€‚

é¦–å…ˆè¦çŸ¥é“ä»€ä¹ˆæ—¶å€™éœ€è¦ç»„ä»¶é‡æ–°è®¡ç®— vnodeï¼Œæˆ–è€…æŒ‰ react çš„è¯´æ³•æ¥è¯´ï¼šä»€ä¹ˆä¼šé€ æˆç»„ä»¶çš„ re-renderï¼ŒçŠ¶æ€çš„æ”¹å˜ï¼ˆstateï¼Œpropsï¼‰ã€‚vue ä¸­ä¹Ÿæ˜¯ä¸€æ ·çš„ã€‚

![æˆªå± 2021-11-16 ä¸‹åˆ 3.00.36.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/256d13f7d3fc4c6db8d3db3581822076~tplv-k3u1fbpfcp-zoom-in-crop-mark:1512:0:0:0.awebp?)

ç®€å•ç†è§£ï¼Œé¦–å…ˆç»„ä»¶ä¸­æ¯ä¸€ä¸ªçŠ¶æ€éƒ½æ˜¯å¯¹åº”ä¸€ä¸ª dep çš„ã€‚dep å’Œ watcher å…ˆå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªçš„å‘å¸ƒè®¢é˜…ï¼Œå½“ data çš„å±æ€§è§¦å‘ set æ—¶å…¶å¯¹åº”çš„ dep å°±ä¼šè®©å…¶å…³è”çš„ watcher è¿›è¡Œæ›´æ–°å·¥ä½œ

ä¹Ÿå°±æ˜¯è¯´å¦‚å›¾ã€‚ç»„ä»¶æ ‘ä¸­çš„æŸä¸€ç»„ä»¶çš„çŠ¶æ€å‘ç”Ÿäº†å˜åŒ–ï¼Œå…¶é‡æ–° diff çš„ä»…ä»…æ˜¯æ–°è€ä¸¤ä¸ªç»„ä»¶è€Œä¸æ˜¯åƒ react é‚£æ ·å…¨éƒ¨è¿›è¡Œ diff ä¸€éã€‚
